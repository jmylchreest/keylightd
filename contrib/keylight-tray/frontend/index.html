<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Keylight Control</title>
        <link rel="stylesheet" href="/src/style.css" />
        <link rel="stylesheet" href="/src/custom.css" id="custom-css" />
    </head>
    <body>
        <div id="app">
            <header class="header">
                <h1>Keylight Control</h1>
                <div class="header-right">
                    <span class="status-badge" id="status-badge"
                        >Loading...</span
                    >
                    <button
                        class="icon-button"
                        id="settings-btn"
                        title="Settings"
                    >
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                            />
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Settings Panel -->
            <div class="settings-panel" id="settings-panel">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <div class="settings-header-actions">
                        <button
                            class="btn btn-primary btn-sm"
                            id="save-settings-btn"
                            disabled
                        >
                            Save
                        </button>
                        <button class="icon-button" id="settings-close-btn">
                            <svg viewBox="0 0 24 24">
                                <path
                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                                />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="settings-content">
                    <!-- Connection Tab -->
                    <section class="settings-section">
                        <h3>Connection</h3>
                        <div class="setting-row">
                            <label>Connection Type</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input
                                        type="radio"
                                        name="connection-type"
                                        value="socket"
                                        id="conn-socket"
                                        checked
                                    />
                                    Unix Socket
                                </label>
                                <label class="radio-label">
                                    <input
                                        type="radio"
                                        name="connection-type"
                                        value="http"
                                        id="conn-http"
                                    />
                                    HTTP API
                                </label>
                            </div>
                        </div>
                        <div class="setting-row socket-setting">
                            <label for="socket-path">Socket Path</label>
                            <input
                                type="text"
                                id="socket-path"
                                placeholder="/run/user/1000/keylightd.sock"
                            />
                        </div>
                        <div
                            class="setting-row http-setting"
                            style="display: none"
                        >
                            <label for="api-url">API URL</label>
                            <input
                                type="text"
                                id="api-url"
                                placeholder="http://localhost:9123"
                            />
                        </div>
                        <div
                            class="setting-row http-setting"
                            style="display: none"
                        >
                            <label for="api-key">API Key</label>
                            <input
                                type="text"
                                id="api-key"
                                placeholder="your-api-key"
                            />
                        </div>
                        <div class="setting-row">
                            <button
                                class="btn btn-secondary"
                                id="test-connection-btn"
                            >
                                Test Connection
                            </button>
                            <span
                                class="connection-status"
                                id="connection-status"
                            ></span>
                        </div>
                    </section>

                    <!-- Display Tab -->
                    <section class="settings-section">
                        <h3>Display</h3>
                        <div class="setting-row">
                            <label for="refresh-interval"
                                >Refresh Interval (ms)</label
                            >
                            <input
                                type="number"
                                id="refresh-interval"
                                value="2500"
                                min="1000"
                                max="10000"
                                step="500"
                            />
                        </div>
                    </section>

                    <!-- Groups Tab -->
                    <section class="settings-section">
                        <h3>Groups</h3>
                        <div class="group-editor" id="group-editor">
                            <!-- Populated dynamically -->
                        </div>
                        <div class="setting-row">
                            <input
                                type="text"
                                id="new-group-name"
                                placeholder="New group name"
                            />
                            <button
                                class="btn btn-secondary"
                                id="create-group-btn"
                            >
                                Create
                            </button>
                        </div>
                    </section>

                    <!-- Visibility Tab -->
                    <section class="settings-section">
                        <h3>Visibility</h3>
                        <div class="visibility-list" id="visibility-lights">
                            <h4>Lights</h4>
                            <!-- Populated dynamically -->
                        </div>
                        <div class="visibility-list" id="visibility-groups">
                            <h4>Groups</h4>
                            <!-- Populated dynamically -->
                        </div>
                    </section>

                    <!-- About Tab -->
                    <section class="settings-section">
                        <h3>About</h3>
                        <div class="about-info">
                            <p><strong>Keylight Control</strong></p>
                            <p id="about-version">Version: dev</p>
                            <p>
                                A tray application for controlling Key Lights
                                via keylightd.
                            </p>
                        </div>
                    </section>
                </div>
            </div>

            <main class="main">
                <section class="section" id="groups-section">
                    <h2>Groups</h2>
                    <div class="controls-list" id="groups-list">
                        <!-- Groups will be inserted here -->
                    </div>
                </section>

                <section class="section" id="lights-section">
                    <h2>Lights</h2>
                    <div class="controls-list" id="lights-list">
                        <!-- Lights will be inserted here -->
                    </div>
                </section>
            </main>

            <footer class="footer">
                <span id="version">v0.0.0</span>
            </footer>
        </div>
        <script type="module" src="/src/main.js"></script>
    </body>
</html>
