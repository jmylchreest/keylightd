<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Keylight Control</title>
        <link rel="stylesheet" href="/src/style.css" />
    </head>
    <body>
        <div id="app">
            <header class="header">
                <h1>Keylight Control</h1>
                <div class="header-right">
                    <span class="status-badge" id="status-badge"
                        >Loading...</span
                    >
                    <button
                        class="master-toggle"
                        id="master-toggle-btn"
                        title="Toggle all lights"
                    >
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"
                            />
                        </svg>
                    </button>
                    <button
                        class="icon-button"
                        id="settings-btn"
                        title="Settings"
                    >
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                            />
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Settings Panel -->
            <div class="settings-panel" id="settings-panel">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <div class="settings-header-actions">
                        <button
                            class="btn btn-primary btn-sm"
                            id="save-settings-btn"
                            disabled
                        >
                            Save
                        </button>
                        <button class="icon-button" id="settings-close-btn">
                            <svg viewBox="0 0 24 24">
                                <path
                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                                />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="settings-content">
                    <!-- Connection Tab -->
                    <section class="settings-section">
                        <h3>Connection</h3>
                        <div class="setting-row">
                            <label>Connection Type</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input
                                        type="radio"
                                        name="connection-type"
                                        value="socket"
                                        id="conn-socket"
                                        checked
                                    />
                                    Unix Socket
                                </label>
                                <label class="radio-label">
                                    <input
                                        type="radio"
                                        name="connection-type"
                                        value="http"
                                        id="conn-http"
                                    />
                                    HTTP API
                                </label>
                            </div>
                        </div>
                        <div class="setting-row socket-setting">
                            <label for="socket-path">Socket Path</label>
                            <input
                                type="text"
                                id="socket-path"
                                placeholder="/run/user/1000/keylightd.sock"
                            />
                        </div>
                        <div
                            class="setting-row http-setting"
                            style="display: none"
                        >
                            <label for="api-url">API URL</label>
                            <input
                                type="text"
                                id="api-url"
                                value="http://localhost:9123"
                            />
                        </div>
                        <div
                            class="setting-row http-setting"
                            style="display: none"
                        >
                            <label for="api-key">API Key</label>
                            <div class="password-input-wrapper">
                                <input
                                    type="password"
                                    id="api-key"
                                    placeholder="your-api-key"
                                />
                                <button
                                    type="button"
                                    class="password-toggle"
                                    id="api-key-toggle"
                                    title="Show/hide API key"
                                >
                                    <svg viewBox="0 0 24 24" class="eye-icon">
                                        <path
                                            d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"
                                        />
                                    </svg>
                                    <svg
                                        viewBox="0 0 24 24"
                                        class="eye-off-icon"
                                        style="display: none"
                                    >
                                        <path
                                            d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"
                                        />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="setting-row">
                            <button
                                class="btn btn-secondary"
                                id="test-connection-btn"
                            >
                                Test Connection
                            </button>
                            <span
                                class="connection-status"
                                id="connection-status"
                            ></span>
                        </div>
                    </section>

                    <!-- Display Tab -->
                    <section class="settings-section">
                        <h3>Display</h3>
                        <div class="setting-row">
                            <label for="refresh-interval"
                                >Refresh Interval (ms)</label
                            >
                            <input
                                type="number"
                                id="refresh-interval"
                                value="2500"
                                min="1000"
                                max="10000"
                                step="500"
                            />
                        </div>
                    </section>

                    <!-- Groups Tab -->
                    <section class="settings-section">
                        <h3>Groups</h3>
                        <div class="group-editor" id="group-editor">
                            <!-- Populated dynamically -->
                        </div>
                        <div class="setting-row">
                            <input
                                type="text"
                                id="new-group-name"
                                placeholder="New group name"
                            />
                            <button
                                class="btn btn-secondary"
                                id="create-group-btn"
                            >
                                Create
                            </button>
                        </div>
                    </section>

                    <!-- Visibility Tab -->
                    <section class="settings-section">
                        <h3>Visibility</h3>
                        <div class="visibility-list" id="visibility-lights">
                            <h4>Lights</h4>
                            <!-- Populated dynamically -->
                        </div>
                        <div class="visibility-list" id="visibility-groups">
                            <h4>Groups</h4>
                            <!-- Populated dynamically -->
                        </div>
                    </section>

                    <!-- About Tab -->
                    <section class="settings-section">
                        <h3>About</h3>
                        <div class="about-info">
                            <p><strong>Keylight Control</strong></p>
                            <p id="about-version">Version: dev</p>
                            <p>
                                A tray application for controlling Key Lights
                                via keylightd.
                            </p>
                        </div>
                    </section>
                </div>
            </div>

            <main class="main">
                <section class="section" id="groups-section">
                    <h2>Groups</h2>
                    <div class="controls-list" id="groups-list">
                        <!-- Groups will be inserted here -->
                    </div>
                </section>

                <section class="section" id="lights-section">
                    <h2>Lights</h2>
                    <div class="controls-list" id="lights-list">
                        <!-- Lights will be inserted here -->
                    </div>
                </section>
            </main>

            <!-- version shown in Settings > About -->
        </div>
        <script type="module" src="/src/main.js"></script>
    </body>
</html>
